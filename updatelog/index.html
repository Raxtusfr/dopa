<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Update Log - DOPA</title>
  <meta name="description" content="The DOPA update log." />
  <style>
    :root {
      --bg: #000;
      --panel: #0d0d0d;
      --text: #f5f5f5;
      --muted: #a0a0a0;
      --accent: #ff0000;
      --accent-2: #b30000;
      --stroke: #1a1a1a;
      --good: #00ff88;
      --warn: #ffcc00;
      --bad: #ff4444;
      --radius: 16px;
      --shadow: 0 8px 20px rgba(255, 0, 0, .35);
    }

    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }

    .container {
      max-width: 1000px;
      margin: 32px auto;
      padding: 0 16px 64px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .title {
      display: flex; align-items: center; gap: 12px;
    }
    .title .logo {
      width: 48px; height: 48px; border-radius: 12px;
      display: grid; place-items: center;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
      font-weight: 800; color: white; font-size: 1.2rem;
    }
    h1 { font-size: 1.8rem; margin: 0; letter-spacing: .5px; color: var(--accent); text-shadow: 0 0 10px var(--accent); }
    .subtitle { color: var(--muted); font-size: .95rem; margin-top: 2px; }

    .controls {
      background: var(--panel);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 12px;
      display: grid; gap: 10px;
      grid-template-columns: 1fr 150px 140px 50px;
    }

    input, select, button {
      background: #111;
      color: var(--text);
      border: 1px solid var(--accent);
      padding: 10px 12px;
      border-radius: 10px;
      outline: none;
      font: inherit;
      transition: 0.2s;
    }
    input::placeholder { color: #555; }
    button:hover, select:hover, input:focus { border-color: #ff3333; box-shadow: 0 0 8px #ff0000; }

    .toggle {
      display: inline-flex; align-items: center; gap: 8px;
      border-radius: 999px; padding: 8px 10px;
      cursor: pointer; user-select: none;
      background: var(--panel);
      border: 1px solid var(--accent);
      color: var(--accent);
    }

    .badge {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 4px 10px; border-radius: 999px; font-size: .8rem;
      border: 1px solid var(--accent);
      background: #111;
      color: var(--accent);
      text-transform: uppercase;
    }

    .list { margin-top: 16px; display: grid; gap: 14px; }

    .card {
      background: var(--panel);
      border: 1px solid var(--accent-2);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: 0.25s;
    }
    .card:hover { transform: translateY(-2px); box-shadow: 0 0 12px var(--accent); }

    .card-header { display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: start; padding: 14px 16px; cursor: pointer; }

    .meta { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
    .version { font-weight: 800; color: var(--accent); text-shadow: 0 0 5px var(--accent); }
    .date { color: var(--muted); font-variant-numeric: tabular-nums; }
    .title-line { display: flex; align-items: center; gap: 10px; font-weight: 700; color: #fff; }

    .tags { display: flex; flex-wrap: wrap; gap: 6px; }

    .expand {
      background: transparent;
      color: var(--accent);
      font-size: 18px;
      border: none;
    }
    .card[aria-expanded="true"] .expand { transform: rotate(180deg); }

    .card-body { display: none; padding: 0 16px 16px; }
    .card[aria-expanded="true"] .card-body { display: block; }

    .changes { margin: 0; padding-left: 20px; }
    .changes li { margin: 8px 0; }

    .empty { text-align: center; color: var(--muted); padding: 28px; border: 1px dashed var(--accent); border-radius: var(--radius); }

    footer { margin-top: 28px; color: var(--muted); font-size: .9rem; text-align: center; }
    footer a { color: var(--accent); text-decoration: none; }
    footer a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="container" id="app">
    <header>
      <div class="title">
        <div class="logo">UL</div>
        <div>
          <h1>Update Log - DOPA</h1>
          <div class="subtitle">view all updates here.</div>
        </div>
      </div>
      <label class="toggle" id="themeToggle">Theme</label>
    </header>

    <section class="controls">
      <input type="search" id="search" placeholder="Search updates" />
      <select id="tagFilter">
        <option value="">All tags</option>
      </select>
      <select id="sort">
        <option value="newest">Newest first</option>
        <option value="oldest">Oldest first</option>
        <option value="version">Sort by version</option>
      </select>
      <button id="expandAll">⇵</button>
    </section>

    <div class="list" id="list"></div>
    <div class="empty" id="empty" hidden>No updates match your filters.</div>

    <footer>
      <p>why do u even wanna see this?</p>
    </footer>
  </div>

  <script>
    const updates = [
      { version: "1.0.0", date: "2025-09-02", title: "Initial release", tags: ["Added"], changes: ["Update Log Released","Buckshot Roulette fixed"] }
    ];

    const listEl = document.getElementById('list');
    const emptyEl = document.getElementById('empty');
    const searchEl = document.getElementById('search');
    const tagFilterEl = document.getElementById('tagFilter');
    const sortEl = document.getElementById('sort');
    const expandAllBtn = document.getElementById('expandAll');

    const BADGE_CLASS = { Added: 'added', Changed: 'changed', Fixed: 'fixed' };

    function normalize(str){ return (str||'').toLowerCase(); }

    function semverCompare(a, b){
      const pa = a.replace(/^v/i,'').split('.').map(Number);
      const pb = b.replace(/^v/i,'').split('.').map(Number);
      for (let i=0;i<Math.max(pa.length, pb.length);i++){
        const da = pa[i]||0, db = pb[i]||0;
        if (da !== db) return da - db;
      }
      return 0;
    }

    function uniqueTags(items){
      const set = new Set();
      items.forEach(u => (u.tags||[]).forEach(t => set.add(t)));
      return Array.from(set).sort();
    }

    function formatDate(iso){
      try { const d = new Date(iso+'T00:00:00'); return d.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'});}catch{return iso;}
    }

    function renderList(){
      const q = normalize(searchEl.value);
      const tag = tagFilterEl.value;
      const sort = sortEl.value;
      let rows = [...updates];

      if (q) rows = rows.filter(u => normalize(u.version).includes(q) || normalize(u.title).includes(q) || (u.changes||[]).some(c => normalize(c).includes(q)));
      if (tag) rows = rows.filter(u => (u.tags||[]).includes(tag));

      rows.sort((a,b)=> sort==='oldest'? new Date(a.date)-new Date(b.date): sort==='version'? semverCompare(a.version,b.version): new Date(b.date)-new Date(a.date));

      listEl.innerHTML = '';
      rows.forEach(u=>listEl.appendChild(renderCard(u)));
      emptyEl.hidden = rows.length!==0;
    }

    function renderCard(u){
      const card=document.createElement('article');
      card.className='card';
      card.dataset.version=u.version;
      card.setAttribute('aria-expanded','false');
      card.innerHTML=`
        <div class="card-header">
          <div>
            <div class="meta"><span class="version">v${u.version}</span><span class="date">${formatDate(u.date)}</span></div>
            <div class="title-line">${u.title}</div>
            <div class="tags">${(u.tags||[]).map(t=>`<span class="badge">${t}</span>`).join('')}</div>
          </div>
          <button class="expand">▾</button>
        </div>
        <div class="card-body"><ul class="changes">${(u.changes||[]).map(c=>`<li>${c}</li>`).join('')}</ul></div>`;
      card.querySelector('.card-header').addEventListener('click',()=>{
        const open=card.getAttribute('aria-expanded')==='true';
        card.setAttribute('aria-expanded',String(!open));
      });
      return card;
    }

    function populateFilters(){
      const tags=uniqueTags(updates);
      tagFilterEl.innerHTML='<option value="">All tags</option>'+tags.map(t=>`<option value="${t}">${t}</option>`).join('');
    }

    let expandedAll=false;
    function expandCollapseAll(){ expandedAll=!expandedAll; document.querySelectorAll('.card').forEach(c=>c.setAttribute('aria-expanded',String(expandedAll))); }

    (function init(){
      populateFilters();
      renderList();
      searchEl.addEventListener('input',renderList);
      tagFilterEl.addEventListener('change',renderList);
      sortEl.addEventListener('change',renderList);
      expandAllBtn.addEventListener('click',expandCollapseAll);
    })();
  </script>
</body>
</html>
